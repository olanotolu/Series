# Shipyard Deployment Configuration for Series
name: series-consumer
version: 1.0.0

# Application configuration
application:
  name: series-consumer
  runtime: docker
  dockerfile: Dockerfile
  port: 8080  # Optional, for health checks

# Environment variables (set these in Shipyard dashboard)
env:
  # Kafka
  - KAFKA_BOOTSTRAP_SERVERS
  - KAFKA_TOPIC_NAME
  - KAFKA_GROUP_ID
  
  # Supabase
  - SUPABASE_URL
  - SUPABASE_KEY
  - SUPABASE_SERVICE_ROLE_KEY
  
  # Hugging Face
  - HF_TOKEN
  
  # ElevenLabs
  - ELEVENLABS_API_KEY
  
  # AWS (for S3 audio storage)
  - AWS_ACCESS_KEY_ID
  - AWS_SECRET_ACCESS_KEY
  - AWS_REGION
  - S3_AUDIO_BUCKET
  
  # Series API
  - SERIES_API_URL
  - SERIES_API_KEY
  - SENDER_NUMBER

# Resource limits
resources:
  cpu: 1
  memory: 2GB
  disk: 10GB

# Health check
healthcheck:
  path: /health  # If you add a health endpoint
  interval: 30s
  timeout: 10s
  retries: 3

# Scaling
scaling:
  min_instances: 1
  max_instances: 3
  target_cpu: 70

# Restart policy
restart_policy:
  on_failure: always
  max_restarts: 5

